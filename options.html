<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeTrail Settings</title>
    <link rel="stylesheet" href="options.css">
</head>

<body>
    <div class="container">
        <header>
            <div class="logo">
                <span class="logo-icon">üöÄ</span>
                <h1>CodeTrail Settings</h1>
            </div>
            <p class="subtitle">Sync your LeetCode journey to GitHub</p>
        </header>

        <main>
            <form id="settingsForm">
                <section class="card">
                    <h2>GitHub Connection</h2>
                    <p class="description">Configure where your solutions will be saved.</p>

                    <div class="form-group">
                        <label for="username">GitHub Username</label>
                        <input type="text" id="username" placeholder="e.g. torvalds" required>
                    </div>

                    <div class="form-group">
                        <label for="repo">Repository Name</label>
                        <input type="text" id="repo" placeholder="e.g. leetcode-solutions" required>
                        <span class="hint">The repository must exist on your GitHub.</span>
                    </div>

                    <div class="form-group">
                        <label for="token">Personal Access Token</label>
                        <div class="input-with-toggle">
                            <input type="password" id="token" placeholder="ghp_..." required>
                            <button type="button" class="toggle-visibility" id="toggleToken"
                                aria-label="Toggle token visibility">üëÅÔ∏è</button>
                        </div>
                        <span class="hint">Token needs <code>repo</code> scope permission.</span>
                    </div>

                    <div class="form-actions">
                        <button type="button" id="testBtn" class="btn-secondary">Test Connection</button>
                        <button type="submit" id="saveBtn" class="btn-primary">Save Settings</button>
                    </div>
                </section>
            </form>

            <section class="card">
                <h2>How to Get a GitHub Token</h2>
                <ol class="instructions">
                    <li>Go to <strong>GitHub Settings</strong> > <strong>Developer settings</strong></li>
                    <li>Select <strong>Personal access tokens</strong> > <strong>Tokens (classic)</strong></li>
                    <li>Click <strong>Generate new token</strong></li>
                    <li>Select the <code>repo</code> scope checkbox</li>
                    <li>Click <strong>Generate token</strong> and copy it here</li>
                </ol>
                <div class="warning-box">
                    <strong>Keep your token secure!</strong> Never share it with anyone.
                </div>
            </section>

            <section class="card">
                <h2>Bulk Import</h2>
                <p class="description">Sync all your previously solved problems to GitHub.</p>
                <div class="bulk-sync-area">
                    <button type="button" id="bulkSyncBtn" class="btn-primary">Sync All Solved Problems</button>
                    <p class="hint">This may take a while. We process slowly to strictly avoid
                        rate limits.</p>
                    <div id="bulkStatus" class="bulk-status" style="display: none;">
                        <span id="bulkStatusText">Initializing...</span>
                    </div>
                </div>
            </section>

            <section class="card danger-zone">
                <h2>Danger Zone</h2>
                <p>Clear all local data, including connection details and stats. This does not affect your GitHub repo.
                </p>
                <button type="button" id="clearBtn" class="btn-danger">Clear All Data</button>
            </section>
        </main>

        <div id="statusMessage" class="status-message"></div>

        <footer>
            <p>CodeTrail v1.1.0 ‚Ä¢ Made for LeetCoders</p>
        </footer>
    </div>

    <script type="module" src="options.js"></script>
</body>

</html>